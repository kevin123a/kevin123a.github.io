<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>VVIP Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Font Awesome (ikon) & Chart.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#f4f4f4; --sidebar:#420D09; --accent:#FDC12A; --text:#222;
    }
    body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);display:flex;min-height:100vh;}
    .sidebar{width:260px;background:var(--sidebar);color:var(--accent);display:flex;flex-direction:column;padding:18px 0;gap:6px;box-shadow:2px 0 8px rgba(0,0,0,0.08);position:relative}
    .sidebar h2{text-align:center;margin:0 8px 10px;font-family:"Bickham Script Pro",cursive}
    .sidebar a{display:flex;align-items:center;padding:10px 18px;gap:10px;color:var(--accent);text-decoration:none;cursor:pointer;font-weight:700}
    .sidebar a:hover{background:rgba(253,193,42,0.12)}
    .sidebar .caret{margin-left:auto}
    .submenu{display:none;flex-direction:column;padding-left:34px;background:rgba(253,193,42,0.03)}
    .submenu a{font-weight:500;padding:8px 18px;font-size:14px}
    .content{flex:1;padding:22px;overflow:auto}
    header.small{display:flex;align-items:center;gap:10px;margin-bottom:18px}
    header.small h1{margin:0;color:var(--sidebar)}
    /* KPI boxes */
    .kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-bottom:18px}
    .kpi{background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06);text-align:center}
    .kpi h3{margin:0;font-size:13px;color:#666}
    .kpi p{margin:8px 0 0;font-size:20px;font-weight:800;color:var(--sidebar)}
    /* Tables */
    table{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
    th{background:var(--sidebar);color:var(--accent);font-weight:700}
    tr:last-child td{border-bottom:none}
    /* Progress */
    .progress{height:14px;background:#f0f0f0;border-radius:10px;overflow:hidden}
    .progress > i{display:block;height:100%;text-align:center;font-size:11px;color:var(--sidebar);font-weight:700}
    /* Small helper */
    .row{display:flex;gap:14px;align-items:center;flex-wrap:wrap}
    .card{background:#fff;padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.05)}
    .btn{background:var(--accent);color:var(--sidebar);padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    .muted{color:#666;font-size:14px}
    .settings-row{display:flex;gap:8px;align-items:center;margin-top:10px}
    /* Responsive small */
    @media (max-width:900px){
      .sidebar{position:fixed;left:-300px;top:0;height:100%;z-index:999;transition:all .25s}
      .sidebar.active{left:0}
      body.mobile-sidebar-open{overflow:hidden}
      .content{padding:12px}
      .toggle-mobile{display:inline-block}
    }
    .toggle-mobile{display:none;position:fixed;left:8px;top:8px;background:var(--sidebar);color:var(--accent);border:none;padding:10px;border-radius:8px;z-index:1001}
    .emoji-elite{font-size:18px;margin-right:6px}
    /* Dark mode */
    .dark{--bg:#111;--sidebar:#111;--accent:#FFD559;--text:#eee}
    .dark body{background:var(--bg)}
  </style>
</head>
<body>

  <button class="toggle-mobile" onclick="document.getElementById('sidebar').classList.toggle('active')"><i class="fa fa-bars"></i></button>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <h2>VVIP Dashboard</h2>
    <a onclick="showContent('overview')"><i class="fa-solid fa-gauge-high emoji-elite"></i> Overview</a>
    <a onclick="showContent('projects')"><i class="fa-solid fa-briefcase emoji-elite"></i> Projects</a>
    <a onclick="showContent('clients')"><i class="fa-solid fa-users emoji-elite"></i> Clients</a>

    <a onclick="toggleMenu('financeSub')"><i class="fa-solid fa-sack-dollar emoji-elite"></i> Finance <span class="caret"><i class="fa fa-caret-down"></i></span></a>
    <div class="submenu" id="financeSub">
      <a onclick="showContent('cashflow')">üí∞ Cashflow</a>
      <a onclick="showContent('tax')">üìä Tax</a>
      <a onclick="showContent('payroll')">üë• Payroll</a>
    </div>

    <a onclick="toggleMenu('contractsSub')"><i class="fa-solid fa-file-contract emoji-elite"></i> Contracts <span class="caret"><i class="fa fa-caret-down"></i></span></a>
    <div class="submenu" id="contractsSub">
      <a onclick="showContent('drafts')">‚úèÔ∏è Drafts</a>
      <a onclick="showContent('signed')">‚úÖ Signed</a>
      <a onclick="showContent('archives')">üì¶ Archives</a>
    </div>

    <a onclick="showContent('compliance')"><i class="fa-solid fa-scale-balanced emoji-elite"></i> Compliance</a>

    <a onclick="toggleMenu('investmentSub')"><i class="fa-solid fa-lightbulb emoji-elite"></i> Investment <span class="caret"><i class="fa fa-caret-down"></i></span></a>
    <div class="submenu" id="investmentSub">
      <a onclick="showContent('portfolio')">üìã Portfolio</a>
      <a onclick="showContent('IHSG')">üìà IHSG & Markets</a>
    </div>

    <a onclick="showContent('reports')"><i class="fa-solid fa-chart-pie emoji-elite"></i> Reports</a>
    <a onclick="showContent('settings')"><i class="fa-solid fa-gears emoji-elite"></i> Settings</a>

    <div style="margin-top:auto;padding:12px;text-align:center" class="muted">
      <div style="font-weight:700">‚ú® PT Sinar Langit Hanoi</div>
      <div style="font-size:12px">Jl. Nakula, Tanjunganom, Nganjuk</div>
      <div style="margin-top:8px"><button class="btn" onclick="logout()">Logout</button></div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="content" id="mainContent">
    <div class="row header-area">
      <div class="card" style="flex:1">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <div>
            <h1 style="margin:0;color:#420D09">Welcome, PT Sinar Langit Hanoi</h1>
            <div class="muted">Immanuel Eucherius de Yuwa (Kevin) ¬∑ resmi 13 Juli 2025</div>
          </div>
          <div style="text-align:right">
            <div class="muted">Theme</div>
            <div class="settings-row">
              <select id="fontSize" onchange="applyFontSize()" title="Edit font size (EDIT DISINI)">
                <option value="14">14px</option>
                <option value="16" selected>16px</option>
                <option value="18">18px</option>
                <option value="20">20px</option>
              </select>
              <button class="btn" onclick="toggleDark()">üåô</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- content injected here -->
    <div id="viewArea" style="margin-top:16px">
      <!-- default: Overview rendered by JS -->
    </div>
  </div>

  <script>
  /*****************************************
   *  DATA AREA - EDIT DISINI (GANTI DATA)
   *  Ubah angka / text di bawah untuk
   *  mengupdate tabel & chart otomatis.
   *****************************************/
  const DATA = {
    overviewKPI: {
      clientsTotal: 4,            // EDIT DISINI: total clients
      projectsOngoing: 3,        // EDIT DISINI: projects ongoing
      revenueGrowthPct: 15,      // EDIT DISINI: % growth
      complianceScore: 92        // EDIT DISINI: compliance %
    },

    servicesDistribution: [     // EDIT DISINI: distribusi layanan (sum not required)
      {name: 'Personal Financial Management', value: 35},
      {name: 'Private Lending', value: 25},
      {name: 'Immigration Assistance', value: 20},
      {name: 'Business & SOP Consulting', value: 20}
    ],

    projects: [                 // EDIT DISINI: project list
      {name:'Personal Financial Management', status:'Active', progress:80, deadline:'2025-12'},
      {name:'Private Lending Solutions', status:'On Hold', progress:40, deadline:'2026-01'},
      {name:'Immigration Document Assistance', status:'Active', progress:65, deadline:'2025-11'},
      {name:'Business & SOP Consulting', status:'Planning', progress:25, deadline:'2026-03'}
    ],

    clients: [ 'Halora Store', 'Minimal K Group', 'Minimal SHP Indonesia', 'Deyuwa Silona' ], // EDIT DISINI

    finance: {
      cashflow: { income: 60, expense: 30, saving: 10 }, // EDIT DISINI persentase
      taxStatus: 'Patuh',   // EDIT DISINI (contoh: Patuh / Dalam Proses)
      payrollNote: 'Gaji & detail bersifat rahasia. HR mengelola slip gaji setiap bulan.' // EDIT DISINI
    },

    contracts: {
      drafts: [
        {name:'Kontrak Kerjasama A', note:'Review legal'},
        {name:'Kontrak Pinjaman B', note:'Butuh tanda tangan klien'}
      ],
      signed: [
        {name:'Kontrak C', date:'2024-01-15'}
      ],
      archives: [
        {name:'Kontrak Lama', note:'Selesai 2023'}
      ]
    },

    portfolio: [   // EDIT DISINI: kolom "lots" diset 'Rahasia' sesuai permintaan
      {symbol:'BJTM', lots:'Rahasia'}, {symbol:'RUNS', lots:'Rahasia'},
      {symbol:'KOCI', lots:'Rahasia'}, {symbol:'BCAP', lots:'Rahasia'}, {symbol:'LPKR', lots:'Rahasia'}
    ],

    // MARKETS - editable arrays (simulasi). Ganti angka untuk update chart.
    markets: {
      IHSG: {name:'IHSG', history:[6900,7000,7100,7050,7200]},        // EDIT DISINI history points
      VN: {name:'VN-Index', history:[1200,1220,1210,1230,1245]},
      TH: {name:'SET', history:[1500,1510,1490,1520,1535]},
      SG: {name:'STI', history:[3200,3220,3210,3235,3250]},
      GOLD: {name:'Gold (USD/oz)', history:[1900,1910,1905,1920,1930]},
      CRYPTO: {name:'BTCUSD', history:[60000,60500,60200,61000,61500]} // EDIT DISINI
    },

    reports: [ // editable
      {month:'Jan', revenue:'Rp 0', note:'// EDIT DISINI'},
      {month:'Feb', revenue:'Rp 0', note:'// EDIT DISINI'}
    ]
  };

  /*****************************************
   * END DATA AREA
   *****************************************/

  // utilities
  function el(tag, attrs={}, inner=''){ const e = document.createElement(tag); for(let k in attrs) e.setAttribute(k,attrs[k]); if(inner) e.innerHTML = inner; return e; }

  // show content dispatcher
  function showContent(menu){
    // hide mobile sidebar if open
    document.getElementById('sidebar').classList.remove('active');
    const view = document.getElementById('viewArea');
    view.innerHTML = ''; // clear

    if(menu==='overview'){
      renderOverview(view);
    } else if(menu==='projects'){
      renderProjects(view);
    } else if(menu==='clients'){
      renderClients(view);
    } else if(menu==='cashflow'){
      renderCashflow(view);
    } else if(menu==='tax'){
      renderTax(view);
    } else if(menu==='payroll'){
      renderPayroll(view);
    } else if(menu==='drafts'){
      renderDrafts(view);
    } else if(menu==='signed'){
      renderSigned(view);
    } else if(menu==='archives'){
      renderArchives(view);
    } else if(menu==='compliance'){
      renderCompliance(view);
    } else if(menu==='portfolio'){
      renderPortfolio(view);
    } else if(menu==='IHSG'){
      renderMarkets(view);
    } else if(menu==='reports'){
      renderReports(view);
    } else if(menu==='settings'){
      renderSettings(view);
    } else {
      view.innerHTML = '<h2>Page Not Found</h2>';
    }
  }

  // toggle submenus
  function toggleMenu(id){ const el = document.getElementById(id); el.style.display = (el.style.display==='flex')?'none':'flex'; }

  // ---------- RENDER FUNCTIONS ----------
  function renderOverview(target){
    target.innerHTML = `
      <div class="row">
        <div style="flex:1">
          <div class="kpi-grid">
            <div class="kpi"><h3>Clients üåê</h3><p>${DATA.overviewKPI.clientsTotal}+</p></div>
            <div class="kpi"><h3>Projects üíº</h3><p>${DATA.overviewKPI.projectsOngoing} Ongoing</p></div>
            <div class="kpi"><h3>Revenue Growth üìà</h3><p>+${DATA.overviewKPI.revenueGrowthPct}%</p></div>
            <div class="kpi"><h3>Compliance ‚ú®</h3><p>${DATA.overviewKPI.complianceScore}%</p></div>
          </div>

          <div class="card" style="padding:12px;">
            <h3 style="margin:6px 0">Service Distribution</h3>
            <div style="max-width:700px;margin:auto"><canvas id="overviewPie"></canvas></div>
            <div style="margin-top:12px;text-align:center" class="muted">(Edit data di bagian <b>DATA.servicesDistribution</b>)</div>
          </div>
        </div>
      </div>
    `;

    // render chart
    const ctx = document.getElementById('overviewPie').getContext('2d');
    const labels = DATA.servicesDistribution.map(s => s.name);
    const values = DATA.servicesDistribution.map(s => s.value);
    new Chart(ctx, {
      type:'doughnut',
      data:{labels:labels,datasets:[{data:values,backgroundColor:['#FFD500','#FF6B6B','#4CAF50','#2196F3']}]},
      options:{plugins:{legend:{position:'bottom'}}}
    });
  }

  function renderProjects(target){
    let rows = '';
    DATA.projects.forEach(p=>{
      rows += `<tr>
        <td>${p.name}</td>
        <td>${p.status}</td>
        <td>
          <div class="progress"><i class="progress-bar" style="width:${p.progress}%">${p.progress}%</i></div>
        </td>
        <td>${p.deadline}</td>
      </tr>`;
    });

    target.innerHTML = `
      <h2>Projects & Services</h2>
      <p class="muted">Daftar layanan & progress (EDIT DISINI di DATA.projects)</p>
      <table><thead><tr><th>Service</th><th>Status</th><th>Progress</th><th>Deadline</th></tr></thead><tbody>${rows}</tbody></table>
    `;
  }

  function renderClients(target){
    const list = DATA.clients.map(c=>`<li>${c}</li>`).join('');
    target.innerHTML = `<h2>Clients</h2><ul>${list}</ul>`;
  }

  function renderCashflow(target){
    target.innerHTML = `
      <h2>Cashflow üí∞</h2>
      <p class="muted">Diagram arus kas (EDIT DISINI di DATA.finance.cashflow)</p>
      <div style="max-width:600px"><canvas id="cashChart"></canvas></div>
    `;
    const ctx = document.getElementById('cashChart').getContext('2d');
    const cf = DATA.finance.cashflow;
    new Chart(ctx, {
      type:'pie',
      data:{labels:['Income','Expense','Saving'],datasets:[{data:[cf.income,cf.expense,cf.saving],backgroundColor:['#4CAF50','#FF6B6B','#FFD500']}]}
    });
  }

  function renderTax(target){
    target.innerHTML = `
      <h2>Tax üìä</h2>
      <p class="muted">Status pajak: <strong>${DATA.finance.taxStatus}</strong></p>
      <p>Biasanya berisi: jenis pajak yang terdaftar, tanggal pelaporan terakhir, PIC akuntansi, dan link dokumen SPT / bukti setor.</p>
      <p class="muted">(Edit teks ringkasan di DATA.finance.taxStatus)</p>
    `;
  }

  function renderPayroll(target){
    target.innerHTML = `
      <h2>Payroll üë•</h2>
      <p class="muted">${DATA.finance.payrollNote}</p>
      <p>Field biasanya: slip gaji bulanan, potongan, tunjangan, dan jadwal pembayaran. Data gaji sebaiknya disimpan ter-enkripsi di server internal.</p>
    `;
  }

  function renderDrafts(target){
    let rows = DATA.contracts.drafts.map(d=>`<tr><td>${d.name}</td><td>${d.note}</td></tr>`).join('');
    target.innerHTML = `<h2>Draft Contracts ‚úèÔ∏è</h2><p class="muted">Saran isi: nama klien, scope, PIC, deadline review.</p><table><thead><tr><th>Nama</th><th>Catatan</th></tr></thead><tbody>${rows}</tbody></table>`;
  }
  function renderSigned(target){
    let rows = DATA.contracts.signed.map(d=>`<tr><td>${d.name}</td><td>${d.date}</td></tr>`).join('');
    target.innerHTML = `<h2>Signed Contracts ‚úÖ</h2><table><thead><tr><th>Nama</th><th>Tanggal</th></tr></thead><tbody>${rows}</tbody></table>`;
  }
  function renderArchives(target){
    let rows = DATA.contracts.archives.map(d=>`<tr><td>${d.name}</td><td>${d.note}</td></tr>`).join('');
    target.innerHTML = `<h2>Archived Contracts üì¶</h2><table><thead><tr><th>Nama</th><th>Keterangan</th></tr></thead><tbody>${rows}</tbody></table>`;
  }

  function renderCompliance(target){
    target.innerHTML = `
      <h2>Compliance ‚ú®</h2>
      <p class="muted">Monitoring kepatuhan: pajak, ketenagakerjaan, izin usaha.</p>
      <div style="max-width:600px"><canvas id="compChart"></canvas></div>
    `;
    const ctx = document.getElementById('compChart').getContext('2d');
    new Chart(ctx,{
      type:'doughnut',
      data:{labels:['Pajak','Ketenagakerjaan','Izin Usaha'],datasets:[{data:[85,70,95],backgroundColor:['#FFD500','#FF6B6B','#4CAF50']}]},
      options:{plugins:{legend:{position:'bottom'}}}
    });
  }

  function renderPortfolio(target){
    const rows = DATA.portfolio.map(p=>`<tr><td>${p.symbol}</td><td>${p.lots}</td></tr>`).join('');
    target.innerHTML = `<h2>Portfolio üìã</h2><p class="muted">Jumlah lot disembunyikan (Rahasia)</p><table><thead><tr><th>Saham</th><th>Jumlah (Lot)</th></tr></thead><tbody>${rows}</tbody></table>`;
  }

  // Markets: render charts for IHSG, VN, TH, SG, GOLD, CRYPTO using Chart.js from DATA.markets
  let marketsCharts = {};
  function renderMarkets(target){
    target.innerHTML = `
      <h2>Markets & Indices üìà</h2>
      <button class="btn" onclick="refreshMarkets()">Refresh (simulasi)</button>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;margin-top:12px">
        <div class="card"><h4>IHSG (Indonesia)</h4><canvas id="mIHSG"></canvas></div>
        <div class="card"><h4>VN Index (Vietnam)</h4><canvas id="mVN"></canvas></div>
        <div class="card"><h4>SET (Thailand)</h4><canvas id="mTH"></canvas></div>
        <div class="card"><h4>STI (Singapore)</h4><canvas id="mSG"></canvas></div>
        <div class="card"><h4>Gold (USD/oz)</h4><canvas id="mGOLD"></canvas></div>
        <div class="card"><h4>BTC / USD</h4><canvas id="mCRYPTO"></canvas></div>
      </div>
      <div style="margin-top:10px" class="muted">Edit data di <b>DATA.markets</b> (history arrays). Charts akan me-render ulang saat tekan Refresh.</div>
    `;
    // create charts
    createMarketChart('mIHSG', DATA.markets.IHSG.history, DATA.markets.IHSG.name, '#420D09');
    createMarketChart('mVN', DATA.markets.VN.history, DATA.markets.VN.name, '#FF6B6B');
    createMarketChart('mTH', DATA.markets.TH.history, DATA.markets.TH.name, '#2196F3');
    createMarketChart('mSG', DATA.markets.SG.history, DATA.markets.SG.name, '#4CAF50');
    createMarketChart('mGOLD', DATA.markets.GOLD.history, DATA.markets.GOLD.name, '#f4b400');
    createMarketChart('mCRYPTO', DATA.markets.CRYPTO.history, DATA.markets.CRYPTO.name, '#6f42c1');
  }

  function createMarketChart(canvasId, arr, label, color){
    const ctx = document.getElementById(canvasId).getContext('2d');
    if(marketsCharts[canvasId]) marketsCharts[canvasId].destroy();
    marketsCharts[canvasId] = new Chart(ctx, {
      type:'line',
      data:{labels:arr.map((_,i)=>i+1), datasets:[{label:label,data:arr,borderColor:color,backgroundColor:color,fill:false,pointRadius:2}]},
      options:{plugins:{legend:{display:false}},scales:{x:{display:false}}}
    });
  }

  function refreshMarkets(){ renderMarkets(document.getElementById('viewArea')); }

  function renderReports(target){
    const rows = DATA.reports.map(r=>`<tr><td>${r.month}</td><td>${r.revenue}</td><td>${r.note}</td></tr>`).join('');
    target.innerHTML = `<h2>Reports üìã</h2><table><thead><tr><th>Bulan</th><th>Pendapatan</th><th>Catatan</th></tr></thead><tbody>${rows}</tbody></table><div class="muted">Edit DATA.reports untuk ubah tabel</div>`;
  }

  function renderSettings(target){
    target.innerHTML = `
      <h2>Settings ‚öôÔ∏è</h2>
      <div class="card">
        <label>Font size (EDIT DISINI di dropdown atas): <select id="setFont"><option>14</option><option selected>16</option><option>18</option><option>20</option></select></label>
        <div style="margin-top:10px"><button class="btn" onclick="toggleDark()">Toggle Dark Mode</button></div>
      </div>
    `;
    document.getElementById('setFont').onchange = (e)=>{ document.getElementById('fontSize').value = e.target.value; applyFontSize(); }
  }

  // helper to set font-size (bound to top dropdown)
  function applyFontSize(){
    const v = document.getElementById('fontSize').value;
    document.documentElement.style.fontSize = v + 'px';
  }

  // toggle dark
  function toggleDark(){
    document.documentElement.classList.toggle('dark');
  }

  // logout
  function logout(){ window.location.href = 'vvip.html'; }

  // initial load: render overview
  showContent('overview');

  // allow calling showContent when user clicks links in sidebar (attach handlers)
  document.querySelectorAll('.sidebar a').forEach(a=>{
    a.addEventListener('click', ()=> {
      // find the onclick function call e.g. "showContent('overview')"
      const onclick = a.getAttribute('onclick');
      if(onclick && onclick.includes("showContent(")){
        // extract param
        const m = onclick.match(/showContent\('([^']+)'\)/);
        if(m) showContent(m[1]);
      }
    });
  });

  // small helpers to show some subpages from sidebar submenu items that call showContent directly
  // also hook the 'drafts','signed','archives' items
  // (if user clicked menu items that are the submenu <a onclick="showContent('...')">)
  document.querySelectorAll('[onclick^="showContent"]').forEach(elm=>{
    elm.addEventListener('click', (ev)=>{ ev.preventDefault(); try{ const text = elm.getAttribute('onclick'); const m=text.match(/showContent\('([^']+)'\)/); if(m) showContent(m[1]); }catch(e){} });
  });

  // enable click toggles for submenu caret items (toggleMenu called by inline onclick already configured)

  </script>
</body>
</html>
